---
title: mysql知识汇总
date: 2018-12-10 15:44:57
tags: mysql
---
### 为什么 group by 和 order by 会使查询变慢? 
因为这两个操作需要一个临时表来处理查询的结果数据
### 谈谈你对索引的理解？ 
索引是若干数据行的关键字的列表，查询数据时，通过索引中的关键字可以快速定位到要访问的记录所在的数据块，从而大大减少读取IO的次数，因此可以显著提升性能。
### 是不是索引建立得越多越好？ 
合理的索引可以提高查询速度，但是索引在增、删、改的时候需要去维护，所以过多的索引会导致其他操作变慢，从而得不偿失。原则上只在查询使用的字段上增加索引。
创建索引和维护索引要耗费时间，这种时间随着数据量的增加而增加。
### 为什么 UNION ALL 比 UNION 快？ 
因为在使用UNION的时候，需要删除重复的记录，所以在知道UNION查询的结果没有重复的情况下，一定要使用UNION ALL。
### 数据库事务的四个特性及含义
数据库事务正确执行的4个要素(ACID)：
* 原子性(Atomicity)：整个事物中的所有操作，要么全部完成，要的全部失败，不可能停滞在某一环节。如果执行出错则全部回滚(rollback);
* 一致性(Correspondence)：一致性是指事务必须使数据库从一个一致性状态变换到另一个一致性状态，也就是说一个事务执行之前和执行之后都必须处于一致性状态。拿转账来说，假设用户A和用户B两者的钱加起来一共是5000，那么不管A和B之间如何转账，转几次账，事务结束后两个用户的钱相加起来应该还得是5000，这就是事务的一致性。
* 隔离性(Isolation)：事务的隔离性是多个用户并发访问数据库时，数据库为每一个用户开启的事务，不能被其他事务的操作数据所干扰，多个并发事务之间要相互隔离。
* 持久性(Durability)：持久性是指一个事务一旦被提交，它对数据库中数据的改变就是永久性的，接下来即使数据库发生故障也不应该对其有任何影响。
### 事务隔离级别
#### 事务的并发问题
* 脏读：事务A读取了事务B更新的数据，然后B回滚操作，那么A读取到的数据是脏数据
* 不可重复读：事务 A 多次读取同一数据，事务 B 在事务A多次读取的过程中，对数据作了更新并提交，导致事务A多次读取同一数据时，结果 不一致。
* 幻读：系统管理员A将数据库中所有学生的成绩从具体分数改为ABCDE等级，但是系统管理员B就在这个时候插入了一条具体分数的记录，当系统管理员A改结束后发现还有一条记录没有改过来，就好像发生了幻觉一样，这就叫幻读。
小结：不可重复读的和幻读很容易混淆，不可重复读侧重于修改，幻读侧重于新增或删除。解决不可重复读的问题只需锁住满足条件的行，解决幻读需要锁表
#### MySQL事务隔离级别
事务隔离级别					脏读	不可重复读	幻读
读未提交（read-uncommitted）	是	        是	     是
不可重复读（read-committed）	否	        是	     是
可重复读（repeatable-read）	    否	        否	     是
串行化（serializable）	        否	        否	     否
mysql默认的事务隔离级别为repeatable-read
------------
### 参考链接
[事务隔离级别参考链接](https://www.cnblogs.com/huanongying/p/7021555.html)